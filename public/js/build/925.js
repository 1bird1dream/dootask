"use strict";(self.webpackChunkDooTask=self.webpackChunkDooTask||[]).push([[925],{73925:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const s={name:"SystemSetting",data:function(){return{loadIng:0,formDatum:{}}},mounted:function(){this.systemSetting()},methods:{submitForm:function(){var t=this;this.$refs.formDatum.validate((function(e){e&&t.systemSetting(!0)}))},resetForm:function(){this.formDatum=$A.cloneJSON(this.formDatum_bak)},formArchived:function(t){this.formDatum=r(r({},this.formDatum),{},{auto_archived:t})},systemSetting:function(t){var e=this;this.loadIng++,this.$store.dispatch("call",{url:"system/setting?type="+(t?"save":"all"),data:this.formDatum}).then((function(a){var o=a.data;t&&$A.messageSuccess("修改成功"),e.loadIng--,e.formDatum=o,e.formDatum_bak=$A.cloneJSON(e.formDatum)})).catch((function(a){var o=a.msg;t&&$A.modalError(o),e.loadIng--}))}}};var i=a(51900);const l=(0,i.Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-system-item"},[a("Form",{ref:"formDatum",attrs:{model:t.formDatum,"label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:t.$L("允许注册"),prop:"reg"}},[a("RadioGroup",{model:{value:t.formDatum.reg,callback:function(e){t.$set(t.formDatum,"reg",e)},expression:"formDatum.reg"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("允许")))]),t._v(" "),a("Radio",{attrs:{label:"invite"}},[t._v(t._s(t.$L("邀请码")))]),t._v(" "),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("禁止")))])],1),t._v(" "),"open"==t.formDatum.reg?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("允许：开放注册功能。")))]):"invite"==t.formDatum.reg?[a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("邀请码：注册时需填写下方邀请码。")))]),t._v(" "),a("Input",{staticStyle:{width:"200px","margin-top":"6px"},model:{value:t.formDatum.reg_invite,callback:function(e){t.$set(t.formDatum,"reg_invite",e)},expression:"formDatum.reg_invite"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(t.$L("邀请码")))])])]:t._e()],2),t._v(" "),a("FormItem",{attrs:{label:t.$L("登录验证码"),prop:"loginCode"}},[a("RadioGroup",{model:{value:t.formDatum.login_code,callback:function(e){t.$set(t.formDatum,"login_code",e)},expression:"formDatum.login_code"}},[a("Radio",{attrs:{label:"auto"}},[t._v(t._s(t.$L("自动")))]),t._v(" "),a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("开启")))]),t._v(" "),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("关闭")))])],1),t._v(" "),"auto"==t.formDatum.login_code?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("自动：密码输入错误后必须添加验证码。")))]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("密码策略"),prop:"passwordPolicy"}},[a("RadioGroup",{model:{value:t.formDatum.password_policy,callback:function(e){t.$set(t.formDatum,"password_policy",e)},expression:"formDatum.password_policy"}},[a("Radio",{attrs:{label:"simple"}},[t._v(t._s(t.$L("简单")))]),t._v(" "),a("Radio",{attrs:{label:"complex"}},[t._v(t._s(t.$L("复杂")))])],1),t._v(" "),"simple"==t.formDatum.password_policy?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("简单：大于或等于6个字符。")))]):"complex"==t.formDatum.password_policy?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("复杂：大于或等于6个字符，包含数字、字母大小写或者特殊字符。")))]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("邀请项目"),prop:"projectInvite"}},[a("RadioGroup",{model:{value:t.formDatum.project_invite,callback:function(e){t.$set(t.formDatum,"project_invite",e)},expression:"formDatum.project_invite"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("开启")))]),t._v(" "),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("关闭")))])],1),t._v(" "),"open"==t.formDatum.project_invite?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("开启：项目管理员可生成链接邀请成员加入项目。")))]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("聊天昵称"),prop:"chatNickname"}},[a("RadioGroup",{model:{value:t.formDatum.chat_nickname,callback:function(e){t.$set(t.formDatum,"chat_nickname",e)},expression:"formDatum.chat_nickname"}},[a("Radio",{attrs:{label:"optional"}},[t._v(t._s(t.$L("可选")))]),t._v(" "),a("Radio",{attrs:{label:"required"}},[t._v(t._s(t.$L("必填")))])],1),t._v(" "),"required"==t.formDatum.chat_nickname?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("必填：发送聊天内容前必须设置昵称。")))]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("自动归档任务"),prop:"autoArchived"}},[a("RadioGroup",{attrs:{value:t.formDatum.auto_archived},on:{"on-change":t.formArchived}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("开启")))]),t._v(" "),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("关闭")))])],1),t._v(" "),"open"==t.formDatum.auto_archived?a("ETooltip",{attrs:{placement:"right"}},[a("div",{staticClass:"setting-auto-day"},[a("Input",{attrs:{type:"number"},model:{value:t.formDatum.archived_day,callback:function(e){t.$set(t.formDatum,"archived_day",e)},expression:"formDatum.archived_day"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v(t._s(t.$L("天")))])])],1),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.$L("任务完成 % 天后自动归档。",t.formDatum.archived_day)))])]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("是否启动首页"),prop:"startHome"}},[a("RadioGroup",{model:{value:t.formDatum.start_home,callback:function(e){t.$set(t.formDatum,"start_home",e)},expression:"formDatum.start_home"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("开启")))]),t._v(" "),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("关闭")))])],1),t._v(" "),"open"==t.formDatum.start_home?[a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("首页底部：首页底部网站备案号等信息")))]),t._v(" "),a("Input",{staticStyle:{width:"100%","margin-top":"6px"},model:{value:t.formDatum.home_footer,callback:function(e){t.$set(t.formDatum,"home_footer",e)},expression:"formDatum.home_footer"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(t.$L("首页底部")))])])]:t._e()],2)],1),t._v(" "),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("提交")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("重置")))])],1)],1)}),[],!1,null,null,null).exports;var m=a(20629);function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const p={name:"SystemTaskPriority",data:function(){return{loadIng:0,formDatum:[],nullDatum:{name:"",priority:1,days:1,color:"#8bcf70"}}},mounted:function(){this.systemSetting()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},(0,m.rn)(["taskPriority"])),watch:{taskPriority:{handler:function(t){this.formDatum=$A.cloneJSON(t),0===this.formDatum.length&&this.addDatum()},immediate:!0}},methods:{submitForm:function(){var t=this;this.$refs.formDatum.validate((function(e){e&&t.systemSetting(!0)}))},resetForm:function(){this.formDatum=$A.cloneJSON(this.taskPriority)},addDatum:function(){this.formDatum.push($A.cloneJSON(this.nullDatum))},delDatum:function(t){this.formDatum.splice(t,1),0===this.formDatum.length&&this.addDatum()},systemSetting:function(t){var e=this;this.loadIng++,this.$store.dispatch("call",{url:"system/priority?type="+(t?"save":"get"),method:"post",data:{list:this.formDatum}}).then((function(a){var o=a.data;t&&$A.messageSuccess("修改成功"),e.loadIng--,e.$store.state.taskPriority=$A.cloneJSON(o)})).catch((function(a){var o=a.msg;t&&$A.modalError(o),e.loadIng--}))}}};const f=(0,i.Z)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-system-item"},[a("Form",{ref:"formDatum",attrs:{"label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{staticClass:"setting-color"},[a("Col",{attrs:{span:"12"}},[t._v(t._s(t.$L("名称")))]),t._v(" "),a("Col",{attrs:{span:"4"}},[a("ETooltip",{attrs:{content:t.$L("数值越小级别越高"),"max-width":"auto",placement:"top",transfer:""}},[a("div",[a("Icon",{staticClass:"information",attrs:{type:"ios-information-circle-outline"}}),t._v(" "+t._s(t.$L("级别")))],1)])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("ETooltip",{attrs:{content:t.$L("任务完成时间"),"max-width":"auto",placement:"top",transfer:""}},[a("div",[a("Icon",{staticClass:"information",attrs:{type:"ios-information-circle-outline"}}),t._v(" "+t._s(t.$L("天数")))],1)])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v(t._s(t.$L("颜色")))])],1),t._v(" "),t._l(t.formDatum,(function(e,o){return a("Row",{key:o,staticClass:"setting-color"},[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{maxlength:20,placeholder:t.$L("请输入名称"),clearable:""},on:{"on-clear":function(e){return t.delDatum(o)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{type:"number"},model:{value:e.priority,callback:function(a){t.$set(e,"priority",a)},expression:"item.priority"}})],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{type:"number"},model:{value:e.days,callback:function(a){t.$set(e,"days",a)},expression:"item.days"}})],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("ColorPicker",{attrs:{recommend:"",transfer:""},model:{value:e.color,callback:function(a){t.$set(e,"color",a)},expression:"item.color"}})],1)],1)})),t._v(" "),a("Button",{attrs:{type:"default",icon:"md-add"},on:{click:t.addDatum}},[t._v(t._s(t.$L("添加优先级")))])],2),t._v(" "),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("提交")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("重置")))])],1)],1)}),[],!1,null,null,null).exports;function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const _={name:"SystemColumnTemplate",data:function(){return{loadIng:0,formDatum:[],nullDatum:{name:"",columns:""}}},mounted:function(){this.systemSetting()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){v(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},(0,m.rn)(["columnTemplate"])),watch:{columnTemplate:{handler:function(t){this.formDatum=$A.cloneJSON(t),0===this.formDatum.length&&this.addDatum()},immediate:!0}},methods:{submitForm:function(){var t=this;this.$refs.formDatum.validate((function(e){e&&t.systemSetting(!0)}))},resetForm:function(){this.formDatum=$A.cloneJSON(this.columnTemplate)},addDatum:function(){this.formDatum.push($A.cloneJSON(this.nullDatum))},delDatum:function(t){this.formDatum.splice(t,1),0===this.formDatum.length&&this.addDatum()},systemSetting:function(t){var e=this;this.loadIng++,this.$store.dispatch("call",{url:"system/column/template?type="+(t?"save":"get"),method:"post",data:{list:this.formDatum}}).then((function(a){var o=a.data;t&&$A.messageSuccess("修改成功"),e.loadIng--,e.$store.state.columnTemplate=$A.cloneJSON(o).map((function(t){return $A.isArray(t.columns)&&(t.columns=t.columns.join(",")),t}))})).catch((function(a){var o=a.msg;t&&$A.modalError(o),e.loadIng--}))}}};const b={components:{SystemColumnTemplate:(0,i.Z)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-system-item"},[a("Form",{ref:"formDatum",attrs:{"label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{staticClass:"setting-template"},[a("Col",{attrs:{span:"8"}},[t._v(t._s(t.$L("名称")))]),t._v(" "),a("Col",{attrs:{span:"16"}},[t._v(t._s(t.$L("项目模板")))])],1),t._v(" "),t._l(t.formDatum,(function(e,o){return a("Row",{key:o,staticClass:"setting-template"},[a("Col",{attrs:{span:"8"}},[a("Input",{attrs:{maxlength:20,placeholder:t.$L("请输入名称"),clearable:""},on:{"on-clear":function(e){return t.delDatum(o)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),t._v(" "),a("Col",{attrs:{span:"16"}},[a("TagInput",{model:{value:e.columns,callback:function(a){t.$set(e,"columns",a)},expression:"item.columns"}})],1)],1)})),t._v(" "),a("Button",{attrs:{type:"default",icon:"md-add"},on:{click:t.addDatum}},[t._v(t._s(t.$L("添加模板")))])],2),t._v(" "),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("提交")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("重置")))])],1)],1)}),[],!1,null,null,null).exports,SystemTaskPriority:f,SystemSetting:l},data:function(){return{tabAction:"setting"}}};const h=(0,i.Z)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-item submit"},[a("Tabs",{model:{value:t.tabAction,callback:function(e){t.tabAction=e},expression:"tabAction"}},[a("TabPane",{attrs:{label:t.$L("系统设置"),name:"setting"}},[a("SystemSetting")],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("任务优先级"),name:"taskPriority"}},[a("SystemTaskPriority")],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("项目模板"),name:"columnTemplate"}},[a("SystemColumnTemplate")],1)],1)],1)}),[],!1,null,null,null).exports}}]);