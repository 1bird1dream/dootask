"use strict";(self.webpackChunkDooTask=self.webpackChunkDooTask||[]).push([[113],{17761:(t,e,o)=>{o.d(e,{Z:()=>s});var a=o(1519),n=o.n(a)()((function(t){return t[1]}));n.push([t.id,".flow-content[data-v-5ee0e617],.flow-content .flow-iframe[data-v-5ee0e617]{height:100%;left:0;position:absolute;top:0;width:100%}.flow-content .flow-iframe[data-v-5ee0e617]{background:0 0;border:0;float:none;margin:-1px 0 0;max-width:none;outline:0;padding:0}.flow-content .flow-loading[data-v-5ee0e617]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.flow-content .zoom-box[data-v-5ee0e617]{background-color:#fff;border-radius:3px;bottom:20px;box-shadow:3px 3px 10px rgba(0,0,0,.2);color:#666;height:34px;left:20px;max-width:50%;padding:0 6px;position:absolute;z-index:10}.flow-content .zoom-box .zoom-svg[data-v-5ee0e617]{align-items:center;display:flex;height:34px}.flow-content .zoom-box .zoom-svg .icon[data-v-5ee0e617]{margin:0 6px}.flow-content .zoom-box .zoom-slider[data-v-5ee0e617]{display:none;max-width:100%;padding:0 10px;width:300px}.flow-content .zoom-box.zoom-ing .zoom-svg[data-v-5ee0e617],.flow-content .zoom-box:hover .zoom-svg[data-v-5ee0e617]{display:none}.flow-content .zoom-box.zoom-ing .zoom-slider[data-v-5ee0e617],.flow-content .zoom-box:hover .zoom-slider[data-v-5ee0e617]{display:inline-block}",""]);const s=n},3113:(t,e,o)=>{o.r(e),o.d(e,{default:()=>p});var a=o(17959),n=o(20629);function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const r={name:"Flow",props:{value:{type:Object,default:function(){return{}}},readOnly:{type:Boolean,default:!1}},data:function(){return{loadIng:!0,url:null,zoom:-1,zoomIng:!1,bakData:""}},created:function(){var t="en";switch(this.getLanguage()){case"CN":case"TC":t="zh"}var e=this.readOnly?"viewer":"index",o=this.themeIsDark?"dark":"light";this.url=$A.originUrl("js/grapheditor/"+e+".html?lang="+t+"&theme="+o)},mounted:function(){window.addEventListener("message",this.handleMessage)},beforeDestroy:function(){window.removeEventListener("message",this.handleMessage)},watch:{value:{handler:function(t){this.bakData!=$A.jsonStringify(t)&&(this.bakData=$A.jsonStringify(t),this.updateContent())},deep:!0},zoom:function(t){this.$refs.myFlow.contentWindow.postMessage({act:"zoom",params:{zoom:t/100}},"*")}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){i(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},(0,n.rn)(["themeIsDark"])),methods:{formatZoom:function(t){return t+"%"},updateContent:function(){this.zoom=Math.max(1,100*("number"==typeof this.value.scale?this.value.scale:1)),this.$refs.myFlow.contentWindow.postMessage({act:"setXml",params:Object.assign(this.value,void 0===this.value.xml?{xml:this.value.content}:{})},"*")},handleMessage:function(t){var e=t.data;switch(e.act){case"ready":this.loadIng=!1,this.updateContent();break;case"change":this.bakData=$A.jsonStringify(e.params),this.$emit("input",e.params);break;case"save":this.$emit("saveData");break;case"imageContent":var o=new a.ZP({format:[e.params.width,e.params.height]});o.addImage(e.params.content,"PNG",0,0,0,0),o.save("".concat(e.params.name,".pdf"))}},exportPNG:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.$refs.myFlow.contentWindow.postMessage({act:"exportPNG",params:{name:t||this.$L("无标题"),scale:e,type:"png"}},"*")},exportPDF:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.$refs.myFlow.contentWindow.postMessage({act:"exportPNG",params:{name:t||this.$L("无标题"),scale:e,type:"imageContent"}},"*")}}};var l=o(93379),c=o.n(l),d=o(17761),m={insert:"head",singleton:!1};c()(d.Z,m);d.Z.locals;const p=(0,o(51900).Z)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flow-content"},[o("iframe",{ref:"myFlow",staticClass:"flow-iframe",attrs:{src:t.url}}),t._v(" "),t.loadIng?o("div",{staticClass:"flow-loading"},[o("Loading")],1):t._e(),t._v(" "),t.readOnly&&t.zoom>0?o("div",{staticClass:"zoom-box",class:{"zoom-ing":t.zoomIng}},[o("div",{staticClass:"zoom-svg"},[o("svg",{staticClass:"icon",attrs:{t:"1600613502044",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1161",width:"18",height:"18"}},[o("path",{attrs:{d:"M598.646154 401.723077H279.630769c-15.753846 0-27.569231 11.815385-27.569231 31.507692 0 15.753846 11.815385 27.569231 31.507693 27.569231h319.015384c15.753846 0 27.569231-11.815385 27.569231-31.507692 0-15.753846-15.753846-27.569231-31.507692-27.569231z",fill:"#666666","p-id":"1162"}}),o("path",{attrs:{d:"M921.6 850.707692l-204.8-196.923077c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l204.8 196.923077c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-15.753846 11.815385-35.446154 0-43.323077z m-484.430769-126.030769c-161.476923 0-295.384615-133.907692-295.384616-295.384615S275.692308 133.907692 437.169231 133.907692s295.384615 133.907692 295.384615 295.384616-129.969231 295.384615-295.384615 295.384615z",fill:"#666666","p-id":"1163"}})]),t._v(" "),o("svg",{staticClass:"icon",attrs:{t:"1600613514136",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1403",width:"18",height:"18"}},[o("path",{attrs:{d:"M929.476923 854.646154l-212.676923-200.861539c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l212.676923 200.861539c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-11.815385 11.815385-31.507692 0-43.323077z m-488.369231-126.030769c-161.476923 0-295.384615-133.907692-295.384615-295.384616s133.907692-295.384615 295.384615-295.384615 295.384615 133.907692 295.384616 295.384615-133.907692 295.384615-295.384616 295.384616z",fill:"#666666","p-id":"1404"}}),o("path",{attrs:{d:"M598.646154 401.723077h-129.969231V271.753846c0-15.753846-11.815385-31.507692-31.507692-31.507692s-31.507692 11.815385-31.507693 31.507692v129.969231H279.630769c-15.753846 0-31.507692 11.815385-31.507692 31.507692s11.815385 31.507692 31.507692 31.507693h129.969231V590.769231c0 15.753846 11.815385 31.507692 31.507692 31.507692s31.507692-11.815385 31.507693-31.507692v-129.969231h129.96923c15.753846 0 31.507692-11.815385 31.507693-31.507692s-15.753846-27.569231-35.446154-27.569231z",fill:"#666666","p-id":"1405"}})])]),t._v(" "),o("Slider",{staticClass:"zoom-slider",attrs:{min:1,max:300,"tip-format":t.formatZoom},on:{"on-change":function(e){t.zoomIng=!1},"on-input":function(e){t.zoomIng=!0}},model:{value:t.zoom,callback:function(e){t.zoom=e},expression:"zoom"}})],1):t._e()])}),[],!1,null,"5ee0e617",null).exports}}]);