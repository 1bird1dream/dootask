import{u as r,m as i,V as p,s as o,i as s,c as l,l as h,E as d,n as u}from"./app.2163cd94.js";import{D as m}from"./DialogWrapper.ea811790.js";import{U as c}from"./UserSelect.e1ef2c0e.js";var f=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"page-microapp"},[t("transition",{attrs:{name:"microapp-load"}},[t("div",{staticClass:"microapp-load"},[t("Loading")],1)]),a.url&&!a.loading?t("micro-app",{attrs:{name:a.name,url:a.url,inline:"","keep-alive":"",disableSandbox:"",data:a.appData},on:{created:a.handleCreate,beforemount:a.handleBeforeMount,mounted:a.handleMount,unmount:a.handleUnmount,error:a.handleError,datachange:a.handleDataChange}}):a._e()],1)},g=[];const _={name:"MicroApps",props:{name:{type:String,default:"micro-app"},url:{type:String,default:""},path:{type:String,default:""},data:{type:Object,default:()=>{}}},data(){return{loading:!1,appUrl:"",appData:{}}},deactivated(){},mounted(){this.appData=this.getAppData},watch:{url(a){this.loading=!0,this.$nextTick(()=>{this.loading=!1;let e=$A.apiUrl(a);e.indexOf("http")==-1&&(e=window.location.origin+e),this.appUrl={}.VITE_OKR_WEB_URL||e})},path(a){this.appData={path:a}},data:{handler(a){this.appData=a},deep:!0},$route:{handler(a){a.name=="manage-apps"&&(this.appData={path:a.hash})},immediate:!0},userToken(a){this.appData=this.getAppData,a?this.loading=!1:(r({destroy:!0}),this.loading=!0)}},computed:{...i(["userInfo","themeMode"]),getAppData(){return{type:"init",vues:{Vue:p,store:o,components:{DialogWrapper:m,UserSelect:c,DatePicker:s.exports.DatePicker}},theme:this.themeMode,languages:{languageList:l,languageType:h},userInfo:this.userInfo,path:this.path}}},methods:{handleCreate(a){window.eventCenterForAppNameVite=new d(this.name),this.appData=this.getAppData},handleBeforeMount(a){},handleMount(a){this.appData=this.data,this.path&&(this.appData.path=this.path)},handleUnmount(a){window.dispatchEvent(new Event("apps-unmount"))},handleError(a){console.error("\u5B50\u5E94\u7528\u52A0\u8F7D\u51FA\u9519\u4E86",a.detail.error)},handleDataChange(a){}}},n={};var v=u(_,f,g,!1,D,null,null,null);function D(a){for(let e in n)this[e]=n[e]}var C=function(){return v.exports}();export{C as M};
