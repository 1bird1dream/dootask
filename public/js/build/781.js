(self.webpackChunkDooTask=self.webpackChunkDooTask||[]).push([[781],{30872:(t,n,o)=>{"use strict";o.d(n,{Z:()=>s});var a=o(23645),e=o.n(a)()((function(t){return t[1]}));e.push([t.id,".flow-content[data-v-4bba943c] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.flow-content .flow-iframe[data-v-4bba943c] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: 0 0;\n  border: 0;\n  float: none;\n  margin: -1px 0 0;\n  max-width: none;\n  outline: 0;\n  padding: 0;\n}\n.flow-content .flow-loading[data-v-4bba943c] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.flow-content .zoom-box[data-v-4bba943c] {\n  position: absolute;\n  left: 20px;\n  bottom: 20px;\n  height: 34px;\n  max-width: 50%;\n  border-radius: 3px;\n  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\n  background-color: #fff;\n  color: #666;\n  z-index: 10;\n  padding: 0 6px;\n}\n.flow-content .zoom-box .zoom-svg[data-v-4bba943c] {\n  height: 34px;\n  display: flex;\n  align-items: center;\n}\n.flow-content .zoom-box .zoom-svg .icon[data-v-4bba943c] {\n  margin: 0 6px;\n}\n.flow-content .zoom-box .zoom-slider[data-v-4bba943c] {\n  display: none;\n  padding: 0 10px;\n  width: 300px;\n  max-width: 100%;\n}\n.flow-content .zoom-box:hover .zoom-svg[data-v-4bba943c], .flow-content .zoom-box.zoom-ing .zoom-svg[data-v-4bba943c] {\n  display: none;\n}\n.flow-content .zoom-box:hover .zoom-slider[data-v-4bba943c], .flow-content .zoom-box.zoom-ing .zoom-slider[data-v-4bba943c] {\n  display: inline-block;\n}\n",""]);const s=e},77781:(t,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>r});var a=o(75060);const e={name:"Flow",props:{value:{type:Object,default:function(){return{}}},readOnly:{type:Boolean,default:!1}},data:function(){return{loadIng:!0,url:null,zoom:-1,zoomIng:!1,bakData:""}},created:function(){var t="en";switch(this.getLanguage()){case"CN":case"TC":t="zh"}this.url=window.location.origin+"/js/grapheditor/"+(this.readOnly?"viewer":"index")+".html?lang="+t},mounted:function(){window.addEventListener("message",this.handleMessage)},beforeDestroy:function(){window.removeEventListener("message",this.handleMessage)},watch:{value:{handler:function(t){this.bakData!=$A.jsonStringify(t)&&(this.bakData=$A.jsonStringify(t),this.updateContent())},deep:!0},zoom:function(t){this.$refs.myFlow.contentWindow.postMessage({act:"zoom",params:{zoom:t/100}},"*")}},methods:{formatZoom:function(t){return t+"%"},updateContent:function(){this.zoom=Math.max(1,100*("number"==typeof this.value.scale?this.value.scale:1)),this.$refs.myFlow.contentWindow.postMessage({act:"setXml",params:Object.assign(this.value,void 0===this.value.xml?{xml:this.value.content}:{})},"*")},handleMessage:function(t){var n=t.data;switch(n.act){case"ready":this.loadIng=!1,this.updateContent();break;case"change":this.bakData=$A.jsonStringify(n.params),this.$emit("input",n.params);break;case"save":this.$emit("saveData");break;case"imageContent":var o=new a.ZP({format:[n.params.width,n.params.height]});o.addImage(n.params.content,"PNG",0,0,0,0),o.save("".concat(n.params.name,".pdf"))}},exportPNG:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.$refs.myFlow.contentWindow.postMessage({act:"exportPNG",params:{name:t||this.$L("无标题"),scale:n,type:"png"}},"*")},exportPDF:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.$refs.myFlow.contentWindow.postMessage({act:"exportPNG",params:{name:t||this.$L("无标题"),scale:n,type:"imageContent"}},"*")}}};var s=o(93379),i=o.n(s),l=o(30872),c={insert:"head",singleton:!1};i()(l.Z,c);l.Z.locals;const r=(0,o(51900).Z)(e,(function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"flow-content"},[o("iframe",{ref:"myFlow",staticClass:"flow-iframe",attrs:{src:t.url}}),t._v(" "),t.loadIng?o("div",{staticClass:"flow-loading"},[o("Loading")],1):t._e(),t._v(" "),t.readOnly&&t.zoom>0?o("div",{staticClass:"zoom-box",class:{"zoom-ing":t.zoomIng}},[o("div",{staticClass:"zoom-svg"},[o("svg",{staticClass:"icon",attrs:{t:"1600613502044",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1161",width:"18",height:"18"}},[o("path",{attrs:{d:"M598.646154 401.723077H279.630769c-15.753846 0-27.569231 11.815385-27.569231 31.507692 0 15.753846 11.815385 27.569231 31.507693 27.569231h319.015384c15.753846 0 27.569231-11.815385 27.569231-31.507692 0-15.753846-15.753846-27.569231-31.507692-27.569231z",fill:"#666666","p-id":"1162"}}),o("path",{attrs:{d:"M921.6 850.707692l-204.8-196.923077c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l204.8 196.923077c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-15.753846 11.815385-35.446154 0-43.323077z m-484.430769-126.030769c-161.476923 0-295.384615-133.907692-295.384616-295.384615S275.692308 133.907692 437.169231 133.907692s295.384615 133.907692 295.384615 295.384616-129.969231 295.384615-295.384615 295.384615z",fill:"#666666","p-id":"1163"}})]),t._v(" "),o("svg",{staticClass:"icon",attrs:{t:"1600613514136",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1403",width:"18",height:"18"}},[o("path",{attrs:{d:"M929.476923 854.646154l-212.676923-200.861539c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l212.676923 200.861539c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-11.815385 11.815385-31.507692 0-43.323077z m-488.369231-126.030769c-161.476923 0-295.384615-133.907692-295.384615-295.384616s133.907692-295.384615 295.384615-295.384615 295.384615 133.907692 295.384616 295.384615-133.907692 295.384615-295.384616 295.384616z",fill:"#666666","p-id":"1404"}}),o("path",{attrs:{d:"M598.646154 401.723077h-129.969231V271.753846c0-15.753846-11.815385-31.507692-31.507692-31.507692s-31.507692 11.815385-31.507693 31.507692v129.969231H279.630769c-15.753846 0-31.507692 11.815385-31.507692 31.507692s11.815385 31.507692 31.507692 31.507693h129.969231V590.769231c0 15.753846 11.815385 31.507692 31.507692 31.507692s31.507692-11.815385 31.507693-31.507692v-129.969231h129.96923c15.753846 0 31.507692-11.815385 31.507693-31.507692s-15.753846-27.569231-35.446154-27.569231z",fill:"#666666","p-id":"1405"}})])]),t._v(" "),o("Slider",{staticClass:"zoom-slider",attrs:{min:1,max:300,"tip-format":t.formatZoom},on:{"on-change":function(n){t.zoomIng=!1},"on-input":function(n){t.zoomIng=!0}},model:{value:t.zoom,callback:function(n){t.zoom=n},expression:"zoom"}})],1):t._e()])}),[],!1,null,"4bba943c",null).exports}}]);