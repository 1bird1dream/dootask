"use strict";(self.webpackChunkDooTask=self.webpackChunkDooTask||[]).push([[252],{32252:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var r=a(63874),n=a(20629);function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const i={components:{ImgUpload:r.Z},data:function(){return{loadIng:0,formData:{userimg:"",nickname:"",profession:""},ruleData:{}}},mounted:function(){this.initData()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},(0,n.rn)(["userInfo"])),watch:{userInfo:function(){this.initData()}},methods:{initLanguage:function(){this.ruleData={nickname:[{required:!0,message:this.$L("请输入昵称！"),trigger:"change"},{type:"string",min:2,message:this.$L("昵称长度至少2位！"),trigger:"change"}]}},initData:function(){$A.strExists(this.userInfo.userimg,"/avatar/default_")||this.$set(this.formData,"userimg",this.userInfo.userimg),this.$set(this.formData,"nickname",this.userInfo.nickname),this.$set(this.formData,"profession",this.userInfo.profession),this.formData_bak=$A.cloneJSON(this.formData)},submitForm:function(){var t=this;this.$refs.formData.validate((function(e){if(e){var a=$A.cloneJSON(t.formData);0==$A.count(a.userimg)&&(a.userimg=""),t.loadIng++,t.$store.dispatch("call",{url:"users/editdata",data:a}).then((function(){$A.messageSuccess("修改成功"),t.loadIng--,t.$store.dispatch("getUserInfo").catch((function(){}))})).catch((function(e){var a=e.msg;$A.modalError(a),t.loadIng--}))}}))},resetForm:function(){this.formData=$A.cloneJSON(this.formData_bak)}}};const c=(0,a(51900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-item submit"},[a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleData,"label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:t.$L("头像"),prop:"userimg"}},[a("ImgUpload",{attrs:{num:1},model:{value:t.formData.userimg,callback:function(e){t.$set(t.formData,"userimg",e)},expression:"formData.userimg"}}),t._v(" "),a("span",{staticClass:"form-tip"},[t._v(t._s(t.$L("建议尺寸：200x200")))])],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("邮箱")}},[a("Input",{attrs:{disabled:""},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("昵称"),prop:"nickname"}},[a("Input",{attrs:{maxlength:20},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("职位/职称"),prop:"profession"}},[a("Input",{attrs:{maxlength:20},model:{value:t.formData.profession,callback:function(e){t.$set(t.formData,"profession",e)},expression:"formData.profession"}})],1)],1),t._v(" "),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("提交")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("重置")))])],1)],1)}),[],!1,null,null,null).exports}}]);